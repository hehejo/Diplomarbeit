\section{p2p-Netzwerke}
\label{chap:grundlagen:p2p}

p2p-Netzwerke sind die Grundlage aktueller Filesharing-Systeme wie BitTorrent, die einen schnellen und kostengünstigen Download ermöglichen. Der einfache Netzaufbau, die Fehlertoleranz bei ausfallenden Knoten sowie der Wegfall eines obligatorischen Servers lässt diese Netzwerke auch für Computerspiele interessant werden \cite{Knutsson2004Peertopeer, Triebel2008Peertopeer}. Auch für Sensornetzwerke ist der Aufbau eines p2p-Netzwerkes von Vorteil, da z.B. auch durch deren Verarbeitungsmodell wertvolle Resourcen (wie z.B. Batterie) besser genutzt werden können \cite{MuneebAliandKoenLangendoen2007Case, Sioutas2009Building}. Die Kommunikation zwischen den Knoten benötigt weniger Sendeleistung als es eine Verbindungen zu einem - eventuell weit entfernten - Hauptrechner benötigen würde. Roussopoulos stellt in \cite{Roussopoulos20032} einen Entscheidungsbaum für und wieder den Einsatz von p2p-Netzwerken zur Verfügung.
\missing{Übergang!}


p2p-Netzwerke lassen sich grundsätzlich als \emph{unstrukturiert\footnote{z.B. Napster, Gnutella}} oder \emph{strukturiert\footnote{z.B. Chord, Pastry}} klassifizieren \cite{Steinmetz2005, Lua2005Survey} und in Generationen einteilen \cite{Bo2003PeertoPeer}:
\begin{itemize*}
	\item \emph{1G} unstrukturierte Netzwerke
	\item \emph{2G} strukturierte Netzwerke
	\item \emph{3G} strukturierte Netzwerke mit Fokus auf Anonymität, Authentifizierung, Schutz vor Zensur und verschiedenen Rollen der einzelnen Knoten
\end{itemize*}

Netzwerke der dritten Generation, wie z.B. GNUnet \cite{Bennett2002GNet} werden in dieser Arbeit nicht näher betrachtet. Die zusätzlich angebotene Funktionalität wird nicht benötigt beziehungsweise liegt darauf kein Fokus. Die Authentifizerung von Clients im Spiel findet weiterhin durch einen dezdierten Server statt.\\
In \Fref{chap:grundlagen:cheating} wird ein Überblick möglicher Betrugsarten aufgeführt und auf weitere Literatur zur Betrugsverhinderung beziehungsweise Prävention verwiesen. Für diese Arbeit wird angenommen, dass Clients keinerlei Betrugsversuche unternehmen und kein schadhaftes Verhalten zeigen. Jedoch muss das zu entwickelnde Framework den Einbau möglicher Sicherheitskomponenten vorsehen und in seinen Grundzügen Betrugsversuche erschweren.

Im Folgenden werden die Grundzüge der Netzwerke der ersten und zweiten Generation näher beschrieben.

\subsection{Unstrukturierte Netzwerke}
Unstrukturierte Netzwerke\index{Netzwerk!Overlay!unstrukturiert} zeichnen sich dadurch aus, dass alle Informationen/Dateien durch Suchalgorithmen \cite{Lv2002} gefunden werden müssen. \\
Ein Client tritt dem Netzwerk bei und stellt seine Suchanfrage in das Netz. Werden entsprechende Peers gefunden die diese Suchanfrage beantworten können, werden zum Transfer Direktverbindungen aufgebaut. Aufgrund der einfachen (meist textbasierten) Struktur der Suchanfragen können diese einen weiten Wertebereich abdecken.

Im Wesentlichen gibt es wiederum zwei unterschiedliche Arten:
\begin{itemize*}
\item zentralisiert
\item dezentralisiert
\end{itemize*}

\paragraph{zentralisiert} Knoten im Netz melden eine Liste der verfügbaren Dateien an bekannte Hauptrechner. Suchanfragen werden ebenfalls an diese Rechner gerichtet. Der Suchende erhält eine Liste von potentiellen Peers, die Dateien seiner Suchanfrage entsprecht anbieten. Diese Dateien werden über direkte Verbindungen zwischen den Peers übertragen. Einige Systeme tauschen weitere potentielle Knoten über Peers aus. Die einzelnen Hauptrechner stellen bei dieser Art von System einen \emph{single point of failure} dar \cite{Eberspaecher2005}.

\paragraph{dezentralisiert} In dezentralen Netzen gibt es keine bekannten Hauptrechner. Damit sich ein neuer Knoten in das Netz einklinken kann, muss diesem mindestens ein bestehender Knoten im Netzwerk bekannt sein. Über diesen Peer tauscht der neue Knoten Informationen aus und baut eine Nachbarschaft auf. Damit Dateien gefunden werden können, wird die Suchanfrage an alle Nachbarn geschickt, spricht die Suchanfrage wird durch das Netzwerk geflutet.Diese senden sie weiter an ihre Nachbarn. Die Suchanfrage kann z.B. mit einer Anzahl an Hops oder einer TTL\footnote{Time to live} in ihrer Reichweite eingegrenzt werden. Potentielle Zyklen müssen bei dieser Art von Suche aufgelöst werden \cite{Lv2002}. Sind Peers gefunden, wird ebenfalls eine direkte Verbindung zur Datenübertragung aufgebaut. 

Beispiele für solche Netzwerke sind Napster (zentralisiert), Gnutella oder BitTorrent\footnote{http://www.bittorrent.com/} (dezentralisiert).

\subsection{Strukturierte Netzwerke}
Strukturierte Netzwerke\index{Netzwerk!Overlay!strukturiert} der zweiten Generation sind oft dezentraler Natur. Ein Datum muss nicht gesucht werden, da anhand der Struktur des Netzes die zuständigen Knoten berechnet werden können. Daten können ebenfalls via Direktverbindung übertragen werden, meist wird jedoch das Netzwerk auch zum Versand der Nachrichten genutzt. Hierbei werden die Nachrichten über verschiedene Peers geroutet. Der Dezentralität dieser Netze ist geschuldet, dass ein neuer Knoten mindestens einen Peer aus dem Netzwerk kennen muss. Viele Systeme gehen davon aus, dass der neue Knoten aus einer Liste von Peers, den ihm nähsten Knoten\footnote{Nähe im Sinne von kurzer Latenz aber auch räumlicher Nähe} wählen kann und über diesen den Eintritt in das Netz anstößt.

Strukturierte Netzwerke nutzen die Technik der \ac{dht}, da diese als Grundlage einer Vielzahl von unterschiedlichen Anwendungen dienen kann \cite{Wehrle2005, Ghodsi2006AlgorithmsDHT}.\\
Grundsätzlich ist jedem Knoten ein Schlüssel aus dem Schlüsselraum des Netzwerkes zugeordnet. Ein Knoten ist dabei - je nach genutzter Metrik - für einen Bereich aus dem Schlüsselraum zuständig. Für das zu suchende Datum wird nun der Hashwert berechnet - dieser entspricht einem Schüssel \cite{BalakrishnanLooking}. Der suchende Knoten kennt damit den zuständigen Peer und nutzt das zugrunde liegende Overlay-Netzwerk zur Datenübertragung.\\
Hier wird deutlich, dass diese Netzwerke eher der Kommunikaton diesen als dem Austausch von Dateien.

Darauf aufbauend gibt es unterschiedliche Systeme die sich hinsichtlich Organisation, Routing, Ein- und Austritt von Knoten und dem Verhalten im Fehlerfall unterscheiden \cite{Goetz2005, Lua2005Survey}.

Beispiele für solche Netzwerke sind Chord, Pastry, Tapestry oder CAN \cite{Hosseini2007Survey, Rowstron2001, Zhao2001Tapestry,Zhao2004Tapestry, Ratnasamy2001Scalable}. Auf diese wird unter Anderem im \Fref{chap:evaluation_p2p}, das sich der Evaluation dieser Systeme widmet, näher eingegangen.
