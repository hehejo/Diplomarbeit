\chapter{Motivation}
\label{chap:einleitung}
Die Computerspiele sind inzwischen anerkannter Teil des gesellschaftlichen Miteinanders wie es anhand der zahlreichen Spiele in sozialen Netzwerken ersichtlich ist. Dank fortschreitenden Übertragungs\-techniken verändererten sich Computerspiele von Einzelspieler-Spielen beziehungsweise rundenbasierten Gruppenspielen an einem PC zu im Netzwerk gespielten \acp{mmog}. Dies bedeutet, dass Spieler gemeinsam in einer virtuellen Welt, einem sogenannten \ac{mmve}, interagieren. \acp{mmog} verlangen häufig eine monatliche Gebühr, somit ergeben sich gewissen Ansprüche an diese \cite{Fischer2010a}: Die virtuelle Welt muss konsistent, für alle Spieler gleich, sein. Jeder Spieler muss als vollwertiges Mitglied dieser Welt angesehen werden und darf nicht benachteilt werden. Zusätzlich zur dauerhaften Verfügbarkeit, meist 24/7, müssen bestimmte Aktionen eines Spielers gespeichert werden, damit dieser beim erneuten Eintreten in die virtuelle Welt den alten Zustand seines Avatars wiederfindet \cite{Zhang2008Persistence}. Weiterhin soll ein \ac{mmog} -- je nach Umsetzung -- vielfältige Arten von Interaktionen zwischen Spielern, Spielern und \acp{npc} erlauben. Bei SecondLife\footnote{\url{http://www.secondlife.com}} steht der Aspekt der Interaktion zwischen Spielern im Vordergrund, während bei Guildwars\footnote{\url{http://www.guildwars.com}} das Lösen von Quests innerhalb der virtuellen Welt und das Verbessern des eigenen Avatars das Spiel bestimmt.

Die Kommunikation in \acp{mmve} wird meist über eine Client/Server-Architektur abgewickelt. Sicherheit und Dauerhaftigkeit der Welt sind durch den zentralen Knotenpunkt einfach zu verwirklichen, da alle Nachrichten über diesen verschickt werden und somit geprüft und gespeichert werden können. Konsistenz kann einfacherweise damit erreicht, dass der Server die Nachrichten per Broadcast an alle Spieler verteilt. Bei $n$ angemeldeten Spielern (im Folgenden auch \emph{Knoten} genannt) in der virtuellen Welt hat dies eine Komplexität von $O(n^2)$.  Es ist offensichtlich, dass solch ein System nicht beliebig skaliert, wie ein kleines Rechenbeispiel veranschaulicht: Angenommen eine Updatenachricht ist 10 Bytes groß und der Server ist mit 100 Mbit/s (12500 KB/s) angebunden. Wenn die Framerate des Spiels auf 30 Hz, das heißt 30 Updates/s, festgelegt ist, sendet jeder Knoten 300 Bytes/s (0,3 KB/s) an den Server, die dieser an $n-1$ Knoten verteilen muss. Die Bandbreite des Servers ist daher mit lediglich $\lfloor\sqrt{12500\,KB/s \div 0,3\,KB/s}\rfloor = 204$ Knoten gesättigt. Eine mögliche Lösung ist ein Cluster aus Servern, die gemeinsam viele Spieler bedienen und untereinander sehr gut vernetzt sind um sich ihrerseits in ihren Aktionan anzugleichen. Zusätzlich teilen Betreiber ihr \acp{mmog} in sogenannte \emph{Shards}, untereinander nicht verbundene Instanzen der virtuellen Welt auf verschiedenen Servern, auf. Dies kann durchaus das Spielvergnügen schmälern, denn die Instanzen können auseinanderlaufen, wenn der Betreiber Updates und Addons nicht auf allen Servern simultan einspielt. Weiterhin kann die Aufteilung des Freundeskreis auf verschiedene Server von neuen Spielern als Hindernis angesehen werden: Es ist kaum möglich -- unter normalen Umständen -- mehrere Avatare gleichmäßig zu bespielen.

Um diese Aufteilung in verschiedene Welten aufzubrechen und die Anzahl der vorzuhaltenden Server zu verringern, gibt es Bestrebungen, dezentrale Techniken wie \ac{p2p}-Netzwerke zu nutzen \cite{Knutsson2004Peertopeer, Triebel2008Peertopeer}, da diese Systeme gut skalieren wie es anhand verteilter Anwendungen wie BitTorrent ersichtlich ist. Dies bedeutet jedoch, dass allein die Knoten im System die Welt untereinander konsistent halten müssen. Zusätzlich ergeben sich aus der dezentralen Verwaltung neue Herausforderungen in Bezug auf betrügerisches Verhalten \cite{Kabus2007Design}. Einige Ansätze wie Donnybrook \cite{Bharambe2008Donnybrook} oder VAST \cite{Backhaus2007Voronoibased}, die Optimierungen auf Basis des \ac{p2p}-Konzeptes durchführen, nutzen einzelne Aspekte des Spiels zur Optimierung der Eventverteilung aus. Donnybrook nimmt hier starken Bezug auf die Sichtbarkeit von anderen Avataren, während VAST die Nachbarschaft eines Avatars bezüglich dessen \ac{aoi} betrachtet und die Verbindungen des unterliegenden Netzwerkes damit abgleicht. Statt das System lediglich auf die Behandlung eines Eventtypen hin zu optimieren, strebt im Gegensatz dazu \ac{m2etis} eine Optimierung aller im Spiel genutzten Eventtypen an. Die Verteilung der Events erfolgt dabei über ein kanalbasiertes Publish/Subscribe-System \cite{Fischer2010a}. Für jeden Event der virtuellen Welt wird dabei ein eigener Kanal genutzt. Anhand einer semantischen Beschreibung der vorkommenden Eventtypen in der virtuellen Welt, wird die Verteilungstruktur jedes Kanales entsprechend der Semantiken angepasst. Dies soll das Kommunikationssystem entlasten und neue Möglichkeiten für skalierbare \acp{mmve} bieten ohne dabei die gestellten Ansprüche an \acp{mmve} zu vernachlässigen.

Dieser Arbeit beschreibt die Entwicklung der ersten Komponente von \ac{m2etis}: Das grundlegende Framework des zur Übersetzungszeit optimierbare Publish/Subscribe-System sowie dessen Kommunikation mit dem \ac{p2p}-Netzwerk. Die Verbindung aus \ac{p2p}-Netzwerk, kanalbasiertem Publish/Subscribe-System und semantischer Beschreibung von Eventtypen ermöglicht neue Dimensionen der Verteilungsoptimierung.

\section*{Aufbau dieser Arbeit}
Ein einfaches Szenario zeigt typische Spielsituationen und verdeutlicht mit der semantischen Beschreibung der Eventtypen die Ansätze von \ac{m2etis}. Danach werden die Grundlagen von Overlay- und p2p-Netzwerken sowie verteilten Publish/Subscribe-Systemen eingeführt. Das nächste Kapitel dieser Arbeit widmet sich der Beschreibung der drei Overlay-Netzwerke Chord, Pastry/Tapestry und CAN und der Auswahl eines für \ac{m2etis} geeigneten Netzwerks. Das Kapitel über die Konzeption des Frameworks zeigt die Umsetzung der Dimensionen der Eventtypklassifizierung sowie deren Reihenfolge und Zusammenspiel im Verarbeitungsmodell. Durch Einblicke in die prototypische Implementierung werden die Abstraktionsebenen des Frameworks und dessen einfache Handhabbarkeit ersichtlich. Die Einführung in \ac{tmp} stellt zudem Techniken zur Reduzierung von Overhead zur Laufzeit vor und findet sich, wie auch eine Einführung in die Grundlage vieler strukturierter \ac{p2p}-Netzwerke -- die \ac{dht} --, im Anhang dieser Arbeit.
